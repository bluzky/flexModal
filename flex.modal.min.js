var FlexModal=(function(e){var d={overlay:0.5,events:{},modal:false,modalPosition:function(n){var m=n.offsetWidth;var l=n.offsetHeight;var k={};k.top="50%";k.left="50%";k["margin-left"]=(-m/2)+"px";k["margin-top"]=(-l/2)+"px";return k}};var i=undefined;var a=undefined;var j=undefined;var g={};g.extend=function(k){[].slice.call(arguments,1).forEach(function(m){for(var l in m){k[l]=m[l]}});return k};g.FlexClass=function(l){var k=function(){this.initialize.apply(this,arguments)};for(var m in l){k.prototype[m]=l[m]}if(!k.prototype.initialize){k.prototype.initialize=function(){}}return k};g.removeEvent=function(m){if(m.length==undefined){var n=m.cloneNode(true);m.parentNode.replaceChild(n,m);return n}else{var k=[];for(var l=0;l<m.length;l++){k.push(g.removeEvent(m[l]))}return k}};g.bindEvent=function(m,k,n){if(m.length==undefined){m.addEventListener(k,n)}else{for(var l=0;l<m.length;l++){g.bindEvent(m[l],k,n)}}};g.cssAttributeName=function(k){return k.replace(/\-(.?)/i,function(m,l,n){return l.toUpperCase()})};g.applyCss=function(l,k){for(var m in k){var n=g.cssAttributeName(m);l.style[n]=k[m]}};function b(){if(document.querySelectorAll("#flex-overlay").length==0){var k=document.createElement("div");k.id="flex-overlay";document.body.appendChild(k)}}var c=g.FlexClass({initialize:function(l,k){if(typeof l=="string"){l=document.querySelector(l)}this.modalView=l;b();this.initialSize=undefined;this.options=g.extend({},d,k);this.bindEvent()},bindEvent:function(){var k=this;Object.keys(this.options.events).map(function(o,m){var n=o.split(" ");var l=k.modalView.querySelectorAll(n[1]);l=g.removeEvent(l);g.bindEvent(l,n[0],function(p){if(k.options.events[o]!=undefined){k.options.events[o](p)}})});window.addEventListener("resize",this.onResize.bind(this))},initSize:function(){var l=this.modalView.outerWidth;var k=this.modalView.outerHeight;this.initialSize=this.initialSize||{width:l,height:k}},render:function(){var l=document.querySelector("#flex-overlay");l=g.removeEvent(l);if(!this.options.modal){l.addEventListener("click",this.hideModal.bind(this))}var m={opacity:"1",position:"fixed","z-index":1000};this.modalView.removeAttribute("style");g.applyCss(this.modalView,{display:"block",opacity:"1"});this.initSize();var k=this;setTimeout(function(){m=g.extend(m,k.calculatePosition());g.applyCss(k.modalView,m);g.applyCss(l,{display:"block",opacity:k.options.overlay})},10)},hideModal:function(){var k=document.querySelector("#flex-overlay");g.applyCss(k,{display:"none",opacity:"0"});this.modalView.style.display="none";window.removeEventListener("resize",this.onResize.bind(this))},onResize:function(){var k=this.calculatePosition();g.applyCss(this.modalView,k)},calculatePosition:function(){if(typeof this.options.modalPosition=="function"){var m=this.modalView.offsetWidth;var l=this.modalView.offsetHeight;var k=this.options.modalPosition(this.modalView);if(m>=window.innerWidth){k.left=k["margin-left"]="0"}if(l>=window.innerHeight){k.top=k["margin-top"]="0"}return k}else{if(typeof this.options.modalPosition=="object"){return this.options.modalPosition}}return{}}});if(e!=null){e.fn.flexModal=function(k){i=new c(this.get(0),k);i.render()};e.fn.closeFlexModal=function(){if(i){i.hideModal();i=null}}}function f(l,k){return i=new c(l,k)}function h(){if(i!=null){i.hideModal();i=null}}return{create:f,close:h}})(jQuery);